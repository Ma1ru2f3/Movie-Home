<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MovieBox</title>
<style>
body { margin:0; font-family: Arial, sans-serif; background:#121212; color:#fff;}
header { background:#1f1f1f; padding:1em; text-align:center;}
nav { display:flex; justify-content:center; background:#1a1a1a; }
nav button { background:none; border:none; color:#fff; padding:1em 2em; cursor:pointer; font-size:16px; }
nav button.active { border-bottom:2px solid #ff4500; }
main { max-width:900px; margin:1em auto; padding:1em; }
input[type=text], input[type=password] { width:100%; padding:0.5em; margin:0.5em 0; border-radius:5px; border:none; }
button { background:#ff4500; border:none; padding:0.5em 1em; border-radius:5px; cursor:pointer; color:#fff; }
button:hover { background:#e03e00; }
.video-card { background:#2a2a2a; padding:0.5em; margin:1em 0; border-radius:8px; }
iframe { width:100%; height:250px; border-radius:5px; }
.hidden { display:none; }
</style>
</head>
<body>

<header>
  <h1>MovieBox</h1>
</header>

<nav>
  <button id="homeBtn" class="active" onclick="showSection('home')">Home</button>
  <button id="videoBtn" onclick="showSection('video')">Video</button>
  <button id="uploadBtn" onclick="showSection('upload')">Upload</button>
</nav>

<main>
  <!-- Home Section -->
  <section id="home">
    <input type="text" id="searchBar" placeholder="Search Video..." onkeyup="searchVideo()">
    <div id="videoList"></div>
  </section>

  <!-- Video Section -->
  <section id="video" class="hidden">
    <h2>All Videos</h2>
    <div id="videoListVideo"></div>
  </section>

  <!-- Upload Section -->
  <section id="upload" class="hidden">
    <h2>Upload Video (Admin)</h2>
    <label>Admin Password</label>
    <input type="password" id="adminPass" placeholder="Enter password">

    <label>Title</label>
    <input type="text" id="title" placeholder="Video Title">

    <label>YouTube Link</label>
    <input type="text" id="link" placeholder="https://www.youtube.com/watch?v=VIDEO_ID">

    <button onclick="addVideo()">Add Video</button>
  </section>
</main>

<script>
// Tabs
function showSection(sec) {
    document.querySelectorAll('main section').forEach(s => s.classList.add('hidden'));
    document.getElementById(sec).classList.remove('hidden');
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    document.getElementById(sec+'Btn').classList.add('active');
}

// LocalStorage Video List
let videos = JSON.parse(localStorage.getItem('videos') || '[]');

// Convert YouTube Link to Embed
function convertYouTubeLink(url){
    let id = url.split('v=')[1];
    if(!id) return '';
    let amp = id.indexOf('&');
    if(amp != -1) id = id.substring(0, amp);
    return 'https://www.youtube.com/embed/' + id;
}

// Render Videos
function renderVideos() {
    const containerHome = document.getElementById('videoList');
    const containerVideo = document.getElementById('videoListVideo');
    containerHome.innerHTML = '';
    containerVideo.innerHTML = '';
    videos.forEach(v=>{
        const div = document.createElement('div');
        div.className='video-card';
        div.innerHTML = `
            <h3>${v.title}</h3>
            <iframe src="${convertYouTubeLink(v.url)}" allowfullscreen></iframe>
        `;
        containerHome.appendChild(div.cloneNode(true));
        containerVideo.appendChild(div);
    });
}

// Add Video (Admin Only)
function addVideo(){
    const pass = document.getElementById('adminPass').value;
    if(pass !== '123450'){ alert('Wrong password!'); return; }

    const title = document.getElementById('title').value.trim();
    const link = document.getElementById('link').value.trim();
    if(!title || !link){ alert('Title এবং Link দিতে হবে!'); return; }

    videos.push({title,url:link});
    localStorage.setItem('videos', JSON.stringify(videos));
    renderVideos();
    document.getElementById('title').value='';
    document.getElementById('link').value='';
    document.getElementById('adminPass').value='';
}

// Search Function
function searchVideo(){
    const query = document.getElementById('searchBar').value.toLowerCase();
    const container = document.getElementById('videoList');
    container.innerHTML='';
    videos.filter(v=>v.title.toLowerCase().includes(query))
          .forEach(v=>{
            const div=document.createElement('div');
            div.className='video-card';
            div.innerHTML=`<h3>${v.title}</h3><iframe src="${convertYouTubeLink(v.url)}" allowfullscreen></iframe>`;
            container.appendChild(div);
          });
}

// Initial Render
renderVideos();
</script>

</body>
</html>