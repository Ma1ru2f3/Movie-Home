
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MovieBox Web</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; }
  header { background:#222; color:white; padding:10px; display:flex; justify-content:space-around; }
  header button { background:none; color:white; border:none; font-size:16px; cursor:pointer; }
  .container { padding:20px; }
  .video-card { margin-bottom:20px; }
  .video-card iframe, .video-card video { width:100%; max-width:500px; height:300px; }
  #uploadForm { display:none; margin-bottom:20px; }
  #uploadForm input { margin:5px 0; display:block; width:100%; padding:8px; }
  #loginForm { margin-bottom:20px; }
</style>
</head>
<body>

<header>
  <button onclick="showSection('home')">Home</button>
  <button onclick="showSection('search')">Search</button>
  <button onclick="showSection('favorites')">Favorites</button>
  <button onclick="showSection('profile')">Profile</button>
</header>

<div class="container">

  <!-- Home Section -->
  <div id="homeSection">
    <h2>Home</h2>
    <div id="videosContainer"></div>
  </div>

  <!-- Search Section -->
  <div id="searchSection" style="display:none;">
    <h2>Search</h2>
    <input type="text" id="searchInput" placeholder="Search by title or category">
    <div id="searchResults"></div>
  </div>

  <!-- Favorites Section -->
  <div id="favoritesSection" style="display:none;">
    <h2>Favorites</h2>
    <div id="favoritesContainer"></div>
  </div>

  <!-- Profile Section -->
  <div id="profileSection" style="display:none;">
    <h2>Admin Profile</h2>

    <!-- Admin Login -->
    <div id="loginDiv">
      <form id="loginForm">
        <input type="text" id="adminId" placeholder="Admin ID">
        <input type="password" id="adminPass" placeholder="Password">
        <button type="submit">Login</button>
      </form>
    </div>

    <!-- Upload Form -->
    <div id="uploadDiv" style="display:none;">
      <form id="uploadForm">
        <input type="text" id="videoTitle" placeholder="Video Title" required>
        <input type="text" id="videoLink" placeholder="Video Link (MP4 or iframe)" required>
        <input type="text" id="videoCategory" placeholder="Category" required>
        <button type="submit">Upload Video</button>
      </form>
    </div>

  </div>

</div>

<script>
const SHEETDB_API = "https://sheetdb.io/api/v1/3p5l2ilgzemvr"; // আপনার SheetDB API

function showSection(section) {
  document.getElementById('homeSection').style.display = 'none';
  document.getElementById('searchSection').style.display = 'none';
  document.getElementById('favoritesSection').style.display = 'none';
  document.getElementById('profileSection').style.display = 'none';

  if(section==='home') loadVideos();
  document.getElementById(section+'Section').style.display = 'block';
}

// Load videos from SheetDB
async function loadVideos() {
  const res = await fetch(SHEETDB_API);
  const data = await res.json();
  const container = document.getElementById('videosContainer');
  container.innerHTML = '';
  data.forEach(video => {
    const card = document.createElement('div');
    card.className = 'video-card';
    // MP4 video check
    if(video.Link.includes('.mp4')) {
      card.innerHTML = `<h3>${video.Title} (${video.Category})</h3>
      <video src="${video.Link}" controls></video>`;
    } else {
      card.innerHTML = `<h3>${video.Title} (${video.Category})</h3>
      <iframe src="${video.Link}" frameborder="0" allowfullscreen></iframe>`;
    }
    container.appendChild(card);
  });
}

// Admin Login
document.getElementById('loginForm').addEventListener('submit', function(e){
  e.preventDefault();
  const id = document.getElementById('adminId').value;
  const pass = document.getElementById('adminPass').value;
  if(id==='112233' && pass==='123'){
    alert('Admin logged in!');
    document.getElementById('loginDiv').style.display='none';
    document.getElementById('uploadDiv').style.display='block';
  } else {
    alert('Invalid credentials!');
  }
});

// Upload video to SheetDB
document.getElementById('uploadForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const title = document.getElementById('videoTitle').value;
  const link = document.getElementById('videoLink').value;
  const category = document.getElementById('videoCategory').value;

  const payload = {
    data: {
      Title: title,
      Link: link,
      category: category
    }
  };

  const res = await fetch(SHEETDB_API, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  });

  if(res.ok){
    alert('Video uploaded successfully!');
    document.getElementById('uploadForm').reset();
    loadVideos();
  } else {
    alert('Upload failed!');
  }
});

// Search functionality
document.getElementById('searchInput').addEventListener('input', async function(){
  const query = this.value.toLowerCase();
  const res = await fetch(SHEETDB_API);
  const data = await res.json();
  const results = data.filter(v => v.Title.toLowerCase().includes(query) || v.category.toLowerCase().includes(query));
  const container = document.getElementById('searchResults');
  container.innerHTML = '';
  results.forEach(video => {
    const card = document.createElement('div');
    card.className = 'video-card';
    if(video.Link.includes('.mp4')){
      card.innerHTML = `<h3>${video.Title} (${video.category})</h3>
      <video src="${video.Link}" controls></video>`;
    } else {
      card.innerHTML = `<h3>${video.Title} (${video.category})</h3>
      <iframe src="${video.Link}" frameborder="0" allowfullscreen></iframe>`;
    }
    container.appendChild(card);
  });
});

// Initial load
showSection('home');
</script>

</body>
</html>