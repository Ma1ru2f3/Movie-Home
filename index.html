<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Home</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f0f0f0; margin: 0; padding: 0; }
    header { background: #1a1a1a; color: #fff; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
    header h1 { margin: 0; font-size: 24px; }
    nav button { margin-left: 10px; padding: 8px 12px; border: none; cursor: pointer; background: #333; color: #fff; border-radius: 5px; }
    nav button:hover { background: #555; }
    #search-bar { margin: 20px; display: flex; justify-content: center; }
    #search-bar input { width: 60%; padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc; }
    #video-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; padding: 20px; }
    .video-item { background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
    .video-item h3 { margin-top: 0; font-size: 18px; }
    .video-item p { margin: 5px 0; font-size: 14px; color: #555; }
    .video-item a { display: inline-block; margin-top: 10px; padding: 8px 12px; background: #1a73e8; color: #fff; text-decoration: none; border-radius: 5px; }
    .video-item a:hover { background: #155ab6; }

    /* Profile Modal */
    #profileModal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
    #profileModal .modal-content { background: #fff; padding: 20px; border-radius: 10px; width: 90%; max-width: 500px; }
    #profileModal .modal-content h2 { margin-top: 0; }
    #profileModal .close-btn { float: right; cursor: pointer; color: #333; font-weight: bold; }
    #profileModal .form-group { margin-bottom: 15px; }
    #profileModal input { width: 100%; padding: 10px; font-size: 14px; border-radius: 5px; border: 1px solid #ccc; }
    #profileModal button { padding: 10px 15px; border: none; background: #1a73e8; color: #fff; border-radius: 5px; cursor: pointer; }
    #profileModal button:hover { background: #155ab6; }

    /* History List */
    #history-list { padding: 20px; }
    #history-list h2 { font-size: 20px; }
    #history-list ul { list-style: none; padding-left: 0; }
    #history-list li { padding: 8px 0; border-bottom: 1px solid #ccc; }
  </style>
</head>
<body>

<header>
  <h1>Movie Home</h1>
  <nav>
    <button onclick="showHome()">Home</button>
    <button onclick="showProfile()">Profile</button>
    <button onclick="showHistory()">History</button>
  </nav>
</header>

<div id="search-bar">
  <input type="text" id="searchInput" placeholder="ভিডিও খুঁজুন..." onkeyup="searchVideo()">
</div>

<div id="video-list">
  <!-- ভিডিও লিস্ট এখানে লোড হবে -->
</div>

<!-- Profile Modal -->
<div id="profileModal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeProfile()">&times;</span>
    <h2>Profile</h2>

    <h3>Account</h3>
    <div class="form-group">
      <input type="text" id="fullName" placeholder="Full Name">
    </div>
    <div class="form-group">
      <input type="email" id="email" placeholder="Email">
    </div>
    <div class="form-group">
      <input type="password" id="password" placeholder="Password (8+ characters)">
    </div>
    <div class="form-group">
      <input type="password" id="confirmPassword" placeholder="Confirm Password">
    </div>
    <button onclick="createAccount()">Create Account</button>

    <h3>Owner Info</h3>
    <pre>
┏━━━━━━━━━━━━━━━━━━━━━┓
┃ 🌟 OWNER INFO 🌟
┃ 👤 Name      : Maruf Hossain
┃ 🏡 Address   : Meherpur, Bangladesh
┃ 🚹 Gender    : Male
┃ 🌐 Language  : Bangla / English
┗━━━━━━━━━━━━━━━━━━━━━┛
    </pre>
  </div>
</div>

<!-- History -->
<div id="history-list" style="display:none;">
  <h2>History</h2>
  <ul id="history-ul"></ul>
</div>

<script>
  const sheetAPI = 'https://sheetdb.io/api/v1/3p5l2ilgzemvr';
  let videos = [];
  let history = JSON.parse(localStorage.getItem('history')) || [];

  // ভিডিও লিস্ট লোড
  fetch(sheetAPI)
    .then(res => res.json())
    .then(data => {
      videos = data;
      renderVideos(videos);
    });

  function renderVideos(list) {
    const videoList = document.getElementById('video-list');
    videoList.innerHTML = '';
    list.forEach(video => {
      const div = document.createElement('div');
      div.className = 'video-item';
      div.innerHTML = `
        <h3>${video.title}</h3>
        <p>Category: ${video.category || 'Uncategorized'}</p>
        <a href="${video.link}" target="_blank" onclick="addHistory('${video.title}')">Watch Video</a>
      `;
      videoList.appendChild(div);
    });
  }

  function searchVideo() {
    const query = document.getElementById('searchInput').value.toLowerCase();
    const filtered = videos.filter(v => v.title.toLowerCase().includes(query));
    renderVideos(filtered);
  }

  function showProfile() { document.getElementById('profileModal').style.display = 'flex'; }
  function closeProfile() { document.getElementById('profileModal').style.display = 'none'; }
  function showHome() { 
    document.getElementById('video-list').style.display = 'grid';
    document.getElementById('history-list').style.display = 'none';
    renderVideos(videos);
  }

  function showHistory() {
    document.getElementById('video-list').style.display = 'none';
    document.getElementById('history-list').style.display = 'block';
    const ul = document.getElementById('history-ul');
    ul.innerHTML = '';
    history.forEach(item => {
      const li = document.createElement('li');
      li.textContent = item;
      ul.appendChild(li);
    });
  }

  // Account create
  function createAccount() {
    const fullName = document.getElementById('fullName').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirmPassword').value;

    if(password.length < 8){
      alert('Password must be at least 8 characters');
      return;
    }
    if(password !== confirmPassword){
      alert('Passwords do not match');
      return;
    }

    localStorage.setItem('user', JSON.stringify({fullName, email, password}));
    alert(`Account created for ${fullName} (${email})`);
  }

  // History Add
  function addHistory(title) {
    history.push(title);
    localStorage.setItem('history', JSON.stringify(history));
  }

</script>

</body>
</html>