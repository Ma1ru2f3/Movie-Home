<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Movie Box</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#121212; color:#fff; }
header { display:flex; justify-content:space-around; padding:10px; background:#1f1f1f; }
button { padding:10px 20px; margin:5px; background:#6200ea; color:white; border:none; cursor:pointer; border-radius:5px; }
button:hover { background:#3700b3; }
#content { padding:20px; }
.video-item { margin:10px 0; background:#1f1f1f; padding:10px; border-radius:5px; }
iframe { width:100%; height:300px; border:none; border-radius:5px; margin-top:5px; }
.hidden { display:none; }
input { padding:8px; margin:5px 0; width:100%; border-radius:5px; border:1px solid #555; }
</style>
</head>
<body>

<header>
<button onclick="showHome()">Home</button>
<button onclick="showSearch()">Search</button>
<button onclick="showProfile()">Profile</button>
</header>

<div id="content">
<!-- Dynamic content will appear here -->
</div>

<script>
// SheetDB API URL
const SHEETDB_API = "https://sheetdb.io/api/v1/3p5l2ilgzemvr";

// State
let currentUser = null; // {name, email, isAdmin:false/true}

// Pages
function showHome() {
    fetchVideos();
}

function showSearch() {
    document.getElementById('content').innerHTML = `
        <h2>Search</h2>
        <input type="text" id="searchInput" placeholder="Search video by title..." oninput="searchVideos()">
        <div id="searchResults"></div>
    `;
    fetchVideos();
}

function showProfile() {
    let content = document.getElementById('content');
    content.innerHTML = `
        <h2>Profile</h2>
        <button onclick="showAccountCreateLogin()">Account Create/Login</button>
        <button onclick="showAdminAccess()">Admin Access</button>
        <button onclick="showOwnerInfo()">Owner Info</button>
        <div id="profileContent"></div>
    `;
    if(currentUser) showDashboard();
}

// Account Create/Login
function showAccountCreateLogin() {
    let html = `
        <h3>Account Create/Login</h3>
        <div id="accountForm">
            <h4>Create Account</h4>
            <input type="text" id="fullName" placeholder="Full Name">
            <input type="email" id="email" placeholder="Email">
            <input type="password" id="password" placeholder="Password (min 8 chars)">
            <input type="password" id="confirmPassword" placeholder="Confirm Password">
            <button onclick="createAccount()">Create Account</button>
            <hr>
            <h4>Login</h4>
            <input type="email" id="loginEmail" placeholder="Email">
            <input type="password" id="loginPassword" placeholder="Password">
            <button onclick="loginUser()">Login</button>
        </div>
        <div id="dashboard"></div>
    `;
    document.getElementById('profileContent').innerHTML = html;
}

// Admin Access
function showAdminAccess() {
    let html = `
        <h3>Admin Access</h3>
        <input type="text" id="adminId" placeholder="Admin ID">
        <input type="password" id="adminPass" placeholder="Password">
        <button onclick="loginAdmin()">Login as Admin</button>
        <div id="adminPanel"></div>
    `;
    document.getElementById('profileContent').innerHTML = html;
}

// Owner Info
function showOwnerInfo() {
    let html = `
    <pre style="background:#1f1f1f; padding:10px; border-radius:5px;">
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ      ğŸŒŸ ğ—¢ğ—ªğ—¡ğ—˜ğ—¥ ğ—œğ—¡ğ—™ğ—¢ ğŸŒŸ      
â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«
â”ƒ ğŸ‘¤ ğğšğ¦ğ      : Maruf Hossainãƒƒ
â”ƒ ğŸš¹ ğ†ğğ§ğğğ«    : ğŒğšğ¥ğ
â”ƒ â¤ ğ‘ğğ¥ğšğ­ğ¢ğ¨ğ§ : single ğŸ™
â”ƒ ğŸ‚ ğ€ğ ğ       : 17+
â”ƒ ğŸ•Œ ğ‘ğğ¥ğ¢ğ ğ¢ğ¨ğ§ : ğˆğ¬ğ¥ğšğ¦
â”ƒ ğŸ« ğ„ğğ®ğœğšğ­ğ¢ğ¨ğ§ : SSC 25
â”ƒ ğŸ¡ ğ€ğğğ«ğğ¬ğ¬  : Meherpur, Bangladesh
â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«
â”ƒ ğŸ­ ğ“ğ¢ğ¤ğ­ğ¨ğ¤  : Srotoshini-à¦¸à§à¦°à§‹à¦¤à§à¦¬à§‹à¦¸à¦¿à¦¨à§€
â”ƒ ğŸ“¢ ğ“ğğ¥ğğ ğ«ğšğ¦ : Ã—
â”ƒ ğŸŒ ğ…ğšğœğğ›ğ¨ğ¨ğ¤ : fb.com/profile.php?id=100066542686904
â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
    </pre>
    `;
    document.getElementById('profileContent').innerHTML = html;
}

// -------------------- Users & Admin Logic --------------------
function createAccount() {
    let name = document.getElementById('fullName').value;
    let email = document.getElementById('email').value;
    let pass = document.getElementById('password').value;
    let confirm = document.getElementById('confirmPassword').value;
    if(pass.length < 8){ alert("Password must be at least 8 characters"); return; }
    if(pass !== confirm){ alert("Passwords do not match"); return; }
    // Save to localStorage for demo
    let users = JSON.parse(localStorage.getItem("users") || "[]");
    if(users.find(u=>u.email===email)){ alert("Email already exists"); return; }
    users.push({name,email,pass});
    localStorage.setItem("users",JSON.stringify(users));
    alert("Account created successfully!");
}

function loginUser() {
    let email = document.getElementById('loginEmail').value;
    let pass = document.getElementById('loginPassword').value;
    let users = JSON.parse(localStorage.getItem("users") || "[]");
    let user = users.find(u=>u.email===email && u.pass===pass);
    if(user){ 
        currentUser = {name:user.name,email:user.email,isAdmin:false};
        alert("Login successful!");
        showDashboard();
    } else { alert("Invalid credentials"); }
}

function loginAdmin() {
    let id = document.getElementById('adminId').value;
    let pass = document.getElementById('adminPass').value;
    if(id==="112233445500" && pass==="123450"){
        currentUser = {name:"Admin",email:"admin@moviebox.com",isAdmin:true};
        alert("Admin login successful!");
        showAdminPanel();
    } else { alert("Invalid admin credentials"); }
}

function showDashboard() {
    if(!currentUser || currentUser.isAdmin) return;
    document.getElementById('dashboard').innerHTML = `
        <h4>Welcome, ${currentUser.name}</h4>
        <p>Email: ${currentUser.email}</p>
        <button onclick="logout()">Logout</button>
        <div id="downloadedVideos"></div>
    `;
}

function showAdminPanel() {
    if(!currentUser || !currentUser.isAdmin) return;
    document.getElementById('adminPanel').innerHTML = `
        <h4>Admin Panel</h4>
        <input type="text" id="videoTitle" placeholder="Video Title">
        <input type="text" id="videoLink" placeholder="Video Link (YouTube/Facebook/Other)">
        <input type="text" id="videoCategory" placeholder="Category">
        <button onclick="addVideo()">Upload Video</button>
        <h5>Video List</h5>
        <div id="adminVideoList"></div>
    `;
    fetchVideos();
}

function logout() { currentUser