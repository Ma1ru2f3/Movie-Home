<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Platform</title>
<style>
body{font-family:sans-serif;margin:0;padding:0;}
nav{background:#222;color:#fff;padding:10px;display:flex;gap:15px;}
nav button{background:none;color:#fff;border:none;cursor:pointer;font-size:16px;}
#content{padding:20px;}
video{width:300px;height:200px;margin:10px;}
#progress{display:none;width:100%;background:#eee;margin-top:10px;}
#progress-bar{width:0%;height:20px;background:green;}
.admin-section{margin-top:20px;}
</style>
</head>
<body>

<nav>
  <button onclick="showHome()">Home</button>
  <button onclick="showFavourites()">Favourites</button>
  <button onclick="showSearch()">Search</button>
  <button onclick="showProfile()">Profile</button>
</nav>

<div id="content">
  <div id="home"></div>
  <div id="favourites" style="display:none;">Favourites content</div>
  <div id="search" style="display:none;">
    Search: <input type="text" id="searchInput" oninput="renderSearch()">
    <div id="searchResults"></div>
  </div>
  <div id="profile" style="display:none;">
    <div id="adminLoginDiv">
      Admin Login:<br>
      User: <input type="text" id="adminUser"><br>
      Pass: <input type="password" id="adminPass"><br>
      <button onclick="adminLogin()">Login</button>
    </div>
    <div id="adminSection" class="admin-section" style="display:none;">
      Upload Video:<br>
      Title: <input type="text" id="title"><br>
      File: <input type="file" id="videoFile"><br>
      <button onclick="uploadVideo()">Upload</button>
      <div id="progress"><div id="progress-bar"></div></div>
      <h3>Admin Videos</h3>
      <div id="adminVideos"></div>
    </div>
  </div>
</div>

<script>
let videos = [];
let adminLoggedIn = false;

// Navigation
function showHome(){hideAll();document.getElementById("home").style.display="block"; renderHome();}
function showFavourites(){hideAll();document.getElementById("favourites").style.display="block";}
function showSearch(){hideAll();document.getElementById("search").style.display="block"; renderSearch();}
function showProfile(){hideAll();document.getElementById("profile").style.display="block";}
function hideAll(){document.getElementById("home").style.display="none";document.getElementById("favourites").style.display="none";document.getElementById("search").style.display="none";document.getElementById("profile").style.display="none";}

// Render
function renderHome(){
  const container = document.getElementById("home");
  container.innerHTML="";
  videos.forEach(v=>{
    const vid = document.createElement("video");
    vid.src = v.url;
    vid.controls = true;
    container.appendChild(vid);
    const title = document.createElement("div");
    title.textContent = v.title;
    container.appendChild(title);
  });
}

function renderSearch(){
  const query = document.getElementById("searchInput").value.toLowerCase();
  const container = document.getElementById("searchResults");
  container.innerHTML="";
  videos.filter(v=>v.title.toLowerCase().includes(query))
        .forEach(v=>{
          const vid = document.createElement("video");
          vid.src = v.url;
          vid.controls = true;
          container.appendChild(vid);
          const title = document.createElement("div");
          title.textContent = v.title;
          container.appendChild(title);
        });
}

function renderAdminVideos(){
  const container = document.getElementById("adminVideos");
  container.innerHTML="";
  videos.forEach((v,i)=>{
    const div = document.createElement("div");
    div.innerHTML = `<strong>${v.title}</strong> <button onclick="deleteVideo(${i})">Delete</button>`;
    container.appendChild(div);
  });
}

// Admin login
function adminLogin(){
  const user = document.getElementById("adminUser").value;
  const pass = document.getElementById("adminPass").value;
  if(user==="admin" && pass==="1234"){
    adminLoggedIn = true;
    document.getElementById("adminLoginDiv").style.display="none";
    document.getElementById("adminSection").style.display="block";
    renderAdminVideos();
    alert("Admin logged in!");
  } else alert("Wrong credentials");
}

// Upload video (internal storage simulation)
function uploadVideo(){
  const fileInput = document.getElementById("videoFile");
  const file = fileInput.files[0];
  const title = document.getElementById("title").value || file.name;
  if(!file){ alert("Select video"); return; }

  const reader = new FileReader();
  const progress = document.getElementById("progress");
  const bar = document.getElementById("progress-bar");
  progress.style.display="block";
  bar.style.width="0%";

  reader.onprogress = (e)=>{
    if(e.lengthComputable){
      const percent = (e.loaded/e.total)*100;
      bar.style.width = percent+"%";
    }
  };

  reader.onloadend = ()=>{
    const url = reader.result;
    videos.push({url, title});
    progress.style.display="none";
    alert("Upload Success!");
    renderHome();
    renderAdminVideos();
  };

  reader.readAsDataURL(file);
}

// Delete video
function deleteVideo(index){
  if(confirm("Delete this video?")){
    videos.splice(index,1);
    renderHome();
    renderAdminVideos();
  }
}

// Initial load
renderHome();
</script>

</body>
</html>