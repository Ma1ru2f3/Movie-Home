<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MovieBox Web</title>
<style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #121212; color: #fff; }
    header { background: #1e1e1e; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; }
    header h1 { margin: 0; font-size: 24px; }
    nav button { background: none; border: none; color: #fff; margin-left: 10px; font-size: 16px; cursor: pointer; }
    nav button:hover { color: #1db954; }
    #content { padding: 20px; }
    .video-card { background: #1e1e1e; margin-bottom: 20px; padding: 10px; border-radius: 10px; }
    .video-card iframe { width: 100%; height: 200px; border-radius: 10px; }
    .video-title { font-size: 18px; margin: 10px 0 5px; }
    .video-category { font-size: 14px; color: #aaa; }
    #admin-login, #upload-form { margin-top: 20px; padding: 20px; background: #1e1e1e; border-radius: 10px; }
    input, select { padding: 8px; margin: 5px 0; width: 100%; border-radius: 5px; border: none; }
    button.submit-btn { padding: 10px; width: 100%; background: #1db954; border: none; border-radius: 5px; color: #fff; font-size: 16px; cursor: pointer; }
    button.submit-btn:hover { background: #1ed760; }
    .progress-container { background: #333; border-radius: 5px; margin-top: 10px; }
    .progress-bar { height: 20px; width: 0%; background: #1db954; border-radius: 5px; text-align: center; color: #000; line-height: 20px; }
    .fav-btn { margin-top: 5px; padding: 5px 10px; background: #ff4081; border: none; border-radius: 5px; cursor: pointer; color: #fff; }
</style>
</head>
<body>

<header>
    <h1>MovieBox</h1>
    <nav>
        <button onclick="showSection('home')">Home</button>
        <button onclick="showSection('search')">Search</button>
        <button onclick="showSection('fvrt')">Fvrt</button>
        <button onclick="showSection('profile')">Profile</button>
    </nav>
</header>

<div id="content">

    <!-- Home Section -->
    <div id="home-section">
        <h2>Home</h2>
        <div id="videos-list"></div>
    </div>

    <!-- Search Section -->
    <div id="search-section" style="display:none;">
        <h2>Search</h2>
        <input type="text" id="search-input" placeholder="Search by title or category">
        <div id="search-results"></div>
    </div>

    <!-- Fvrt Section -->
    <div id="fvrt-section" style="display:none;">
        <h2>Favorites</h2>
        <div id="fvrt-list"></div>
    </div>

    <!-- Profile / Admin Section -->
    <div id="profile-section" style="display:none;">
        <h2>Profile / Admin</h2>
        <div id="admin-login">
            <input type="text" id="admin-id" placeholder="Admin ID">
            <input type="password" id="admin-pass" placeholder="Password">
            <button class="submit-btn" onclick="adminLogin()">Login</button>
        </div>

        <div id="upload-form" style="display:none;">
            <h3>Upload Video</h3>
            <input type="text" id="video-title" placeholder="Video Title">
            <input type="text" id="video-category" placeholder="Category">
            <input type="text" id="video-link" placeholder="Video Link (MP4 or iframe URL)">
            <button class="submit-btn" onclick="uploadVideo()">Upload</button>
            <div class="progress-container">
                <div class="progress-bar" id="upload-progress">0%</div>
            </div>
        </div>
    </div>

</div>

<script>
const SHEETDB_API = "https://sheetdb.io/api/v1/YOUR_SHEETDB_ID";

// Navigation
function showSection(section) {
    document.getElementById('home-section').style.display = 'none';
    document.getElementById('search-section').style.display = 'none';
    document.getElementById('fvrt-section').style.display = 'none';
    document.getElementById('profile-section').style.display = 'none';
    if(section==='home') document.getElementById('home-section').style.display='block';
    if(section==='search') document.getElementById('search-section').style.display='block';
    if(section==='fvrt') document.getElementById('fvrt-section').style.display='block';
    if(section==='profile') document.getElementById('profile-section').style.display='block';
}

// Load videos
async function loadVideos() {
    try {
        const res = await fetch(SHEETDB_API);
        const data = await res.json();
        const videosList = document.getElementById('videos-list');
        videosList.innerHTML = '';
        data.forEach(video => {
            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
                <div class="video-title">${video.title}</div>
                <div class="video-category">${video.category}</div>
                <iframe src="${video.link}" frameborder="0" allowfullscreen></iframe>
                <button class="fav-btn" onclick="addToFav('${video.title}','${video.link}','${video.category}')">Add to Favourites</button>
            `;
            videosList.appendChild(card);
        });
    } catch(err) { console.error(err); }
}
loadVideos();

// Favorites
function addToFav(title, link, category) {
    const favs = JSON.parse(localStorage.getItem('favs')||'[]');
    favs.push({title, link, category});
    localStorage.setItem('favs', JSON.stringify(favs));
    alert('Added to Favorites');
    loadFavs();
}

function loadFavs() {
    const favs = JSON.parse(localStorage.getItem('favs')||'[]');
    const favDiv = document.getElementById('fvrt-list');
    favDiv.innerHTML = '';
    favs.forEach(video=>{
        const card = document.createElement('div');
        card.className='video-card';
        card.innerHTML=`
            <div class="video-title">${video.title}</div>
            <div class="video-category">${video.category}</div>
            <iframe src="${video.link}" frameborder="0" allowfullscreen></iframe>
        `;
        favDiv.appendChild(card);
    });
}
loadFavs();

// Admin login
function adminLogin() {
    const id = document.getElementById('admin-id').value;
    const pass = document.getElementById('admin-pass').value;
    if(id==='112233' && pass==='123') {
        alert('Admin Login Successful');
        document.getElementById('upload-form').style.display='block';
        document.getElementById('admin-login').style.display='none';
    } else {
        alert('Invalid Admin Credentials');
    }
}

// Upload Video with progress
async function uploadVideo() {
    const title = document.getElementById('video-title').value;
    const category = document.getElementById('video-category').value;
    const link = document.getElementById('video-link').value;
    if(!title||!category||!link){ alert('Fill all fields'); return; }

    const payload = { data:{title,category,link} };
    const progressBar = document.getElementById('upload-progress');
    progressBar.style.width='0%'; progressBar.textContent='0%';

    try {
        // Fake progress for demo
        let progress = 0;
        const interval = setInterval(()=> {
            if(progress>=90){ clearInterval(interval); }
            else { progress+=10; progressBar.style.width=progress+'%'; progressBar.textContent=progress+'%'; }
        }, 200);

        const res = await fetch(SHEETDB_API,{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify(payload)
        });
        progressBar.style.width='100%