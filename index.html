<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MovieBox Web</title>
<style>
body {font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f4f4;}
header {background:#222; color:#fff; padding:10px; display:flex; justify-content:space-between; align-items:center;}
header h1 {margin:0;}
nav button {margin-left:10px; padding:5px 10px; cursor:pointer;}
#content {padding:20px;}
.video-card {background:#fff; padding:10px; margin-bottom:10px; border-radius:5px; box-shadow:0 0 5px #ccc;}
.video-card h3 {margin:5px 0;}
.video-card iframe {width:100%; height:300px;}
.video-card .admin-options {float:right; cursor:pointer; color:red;}
form input, form select, form button {display:block; margin:5px 0; padding:5px; width:100%;}
#profile-section, #add-video-section, #login-section {background:#fff; padding:20px; border-radius:5px; max-width:400px; margin:auto;}
</style>
</head>
<body>

<header>
<h1>MovieBox</h1>
<nav>
<button onclick="showSection('home')">Home</button>
<button onclick="showSection('search')">Search</button>
<button onclick="showSection('profile')">Profile</button>
</nav>
</header>

<div id="content">

<!-- Home / Video List -->
<div id="home-section">
<h2>Videos</h2>
<div id="video-list"></div>
</div>

<!-- Search -->
<div id="search-section" style="display:none;">
<h2>Search Video</h2>
<input type="text" id="search-input" placeholder="Search by title or category">
<div id="search-result"></div>
</div>

<!-- Profile -->
<div id="profile-section" style="display:none;">
<h2>Profile</h2>

<!-- Account Create/Login -->
<div>
<h3>Account</h3>
<input type="text" id="fullname" placeholder="Full Name">
<input type="email" id="email" placeholder="E-mail">
<input type="password" id="password" placeholder="Password (min 8 chars)">
<input type="password" id="cpassword" placeholder="Confirm Password">
<button onclick="createAccount()">Create Account</button>
<input type="email" id="login-email" placeholder="E-mail">
<input type="password" id="login-pass" placeholder="Password">
<button onclick="loginUser()">Login</button>
</div>

<!-- Admin Access -->
<div>
<h3>Admin Access</h3>
<input type="text" id="admin-id" placeholder="Admin ID">
<input type="password" id="admin-pass" placeholder="Admin Password">
<button onclick="showAddVideo()">Login as Admin</button>
</div>

<!-- Owner Info -->
<div>
<h3>Owner Info</h3>
<pre>
┏━━━━━━━━━━━━━━━━━━━━━┓
┃      🌟 𝗢𝗪𝗡𝗘𝗥 𝗜𝗡𝗙𝗢 🌟      
┣━━━━━━━━━━━━━━━━━━━━━┫
┃ 👤 Name      : Maruf Hossainッ
┃ 🚹 Gender    : Male
┃ ❤ Relation  : Single
┃ 🎂 Age       : 17+
┃ 🕌 Religion  : Islam
┃ 🏫 Education : SSC 25
┃ 🏡 Address   : Meherpur, Bangladesh
┣━━━━━━━━━━━━━━━━━━━━━┫
┃ 🎭 Tiktok   : Srotoshini-স্রোত্বোসিনী
┃ 📢 Telegram : ×
┃ 🌐 Facebook : fb.com/profile.php?id=100066542686904
┗━━━━━━━━━━━━━━━━━━━┛
</pre>
</div>
</div>

<!-- Add Video Section (Admin) -->
<div id="add-video-section" style="display:none;">
<h2>Add Video</h2>
<form onsubmit="addVideo(event)">
<input type="text" id="video-title" placeholder="Video Title" required>
<input type="text" id="video-link" placeholder="Video Link" required>
<input type="text" id="video-category" placeholder="Category" required>
<button type="submit">Add Video</button>
</form>
</div>

</div>

<script>
// SheetDB API URL
const SHEET_API = "https://sheetdb.io/api/v1/3p5l2ilgzemvr";

// Sections
function showSection(section){
  document.getElementById('home-section').style.display = section==='home'? 'block':'none';
  document.getElementById('search-section').style.display = section==='search'? 'block':'none';
  document.getElementById('profile-section').style.display = section==='profile'? 'block':'none';
  document.getElementById('add-video-section').style.display = 'none';
}

// Fetch and display videos
async function fetchVideos(){
  const res = await fetch(SHEET_API);
  const data = await res.json();
  const list = document.getElementById('video-list');
  list.innerHTML = '';
  data.forEach(video=>{
    const card = document.createElement('div');
    card.className = 'video-card';
    card.innerHTML = `
      <h3>${video.title} [${video.category}] 
      <span class="admin-options" onclick="deleteVideo('${video._id}')">🗑</span>
      </h3>
      <iframe src="${convertToEmbed(video.link)}" frameborder="0" allowfullscreen></iframe>
    `;
    list.appendChild(card);
  });
}

// Convert Youtube/Facebook to embeddable link
function convertToEmbed(url){
  if(url.includes('youtube')){
    const id = url.split('v=')[1];
    return `https://www.youtube.com/embed/${id}`;
  } else if(url.includes('facebook')){
    return url; // Facebook embed requires extra code
  }
  return url;
}

// Add Video
async function addVideo(e){
  e.preventDefault();
  const title = document.getElementById('video-title').value;
  const link = document.getElementById('video-link').value;
  const category = document.getElementById('video-category').value;
  const res = await fetch(SHEET_API, {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({data:{title, link, category}})
  });
  alert('Video added!');
  fetchVideos();
  document.getElementById('video-title').value='';
  document.getElementById('video-link').value='';
  document.getElementById('video-category').value='';
}

// Delete Video
async function deleteVideo(id){
  if(prompt('Enter Admin code to delete')==='123450'){
    await fetch(`${SHEET_API}/${id}`, {method:'DELETE'});
    fetchVideos();
  }else alert('Invalid admin code');
}

// Show Add Video form (Admin)
function showAddVideo(){
  const id = document.getElementById('admin-id').value;
  const pass = document.getElementById('admin-pass').value;
  if(id==='112233445500' && pass==='123450'){
    document.getElementById('add-video-section').style.display='block';
    alert('Admin login success');
  }else alert('Invalid admin credentials');
}

// Account Create/Login (simple)
function createAccount(){
  const fullname = document.getElementById('fullname').value;
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  const cpassword = document.getElementById('cpassword').value;
  if(password.length<8){alert('Password min 8 char'); return;}
  if(password!==cpassword){alert('Password not match'); return;}
  localStorage.setItem(email, JSON.stringify({fullname,email,password}));
  alert('Account created!');
}

function loginUser(){
  const email = document.getElementById('login-email').value;
  const password = document.getElementById('login-pass').value;
  const user = JSON.parse(localStorage.getItem(email));
  if(user && user.password===password) alert('Login success');
  else alert('Invalid credentials');
}

// Search
document.getElementById('search-input').addEventListener('input', async function(){
  const q = this.value.toLowerCase();
  const res = await fetch(SHEET_API);
  const data = await res.json();
  const result = data.filter(v=>v.title.toLowerCase().includes(q) || v.category.toLowerCase().includes(q));
  const container = document.getElementById('search-result');
  container.innerHTML='';
  result.forEach(video=>{
    const card = document.createElement('div');
    card.className='video-card';
    card.innerHTML = `
      <h3>${video.title} [${video.category}]</h3>
      <iframe src="${convertToEmbed(video.link)}" frameborder="0" allowfullscreen></iframe>
    `;
    container.appendChild(card);
  });
});

fetchVideos();
</script>

</body>
</html>