<!DOCTYPE html>
<html>
<head>
  <title>MovieBox</title>
</head>
<body>
  <h1>MovieBox</h1>

  <!-- Admin login -->
  <div id="adminLogin">
    <input type="text" id="user" placeholder="User">
    <input type="password" id="pass" placeholder="Password">
    <button onclick="loginAdmin()">Login</button>
  </div>

  <!-- Upload section -->
  <div id="uploadSection" style="display:none;">
    <input type="file" id="videoFile">
    <button onclick="uploadVideo()">Upload Video</button>
  </div>

  <!-- Video list -->
  <div id="videos"></div>

  <script>
    let isAdmin = false;

    function loginAdmin() {
      const user = document.getElementById("user").value;
      const pass = document.getElementById("pass").value;

      // Simple front-end check
      if(user === "admin" && pass === "1234") {
        isAdmin = true;
        document.getElementById("uploadSection").style.display="block";
        document.getElementById("adminLogin").style.display="none";
      } else {
        alert("Invalid login");
      }
    }

    async function uploadVideo() {
      const file = document.getElementById("videoFile").files[0];
      if(!file) return alert("Select a video");

      const formData = new FormData();
      formData.append("video", file);
      formData.append("user", "admin");
      formData.append("pass", "1234");

      const res = await fetch("/upload", { method:"POST", body: formData });
      const data = await res.json();
      alert("Uploaded: "+data.public_id);
      loadVideos();
    }

    async function deleteVideo(public_id){
      if(!confirm("Delete this video?")) return;
      const res = await fetch("/delete", {
        method:"POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({user:"admin", pass:"1234", public_id})
      });
      const data = await res.json();
      alert("Deleted: "+public_id);
      loadVideos();
    }

    // Load video list (demo)
    async function loadVideos(){
      document.getElementById("videos").innerHTML = `
        <p>Video list will appear here (implement Cloudinary fetch)</p>
      `;
    }

    loadVideos();
  </script>
</body>
</html>