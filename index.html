<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MovieBox Web</title>
<style>
body {font-family: Arial, sans-serif; background:#111; color:#fff; margin:0; padding:0;}
header {background:#222; padding:10px; display:flex; justify-content:space-between; align-items:center;}
nav button {margin:0 5px; padding:8px 12px; background:#333; color:#fff; border:none; cursor:pointer;}
.container {padding:20px;}
.hidden {display:none;}
.video-card {background:#222; padding:10px; margin:10px 0; border-radius:8px; display:flex; justify-content:space-between; align-items:center;}
.video-card button {margin-left:5px; padding:5px;}
input, button {padding:5px; margin:5px 0;}
</style>
</head>
<body>

<header>
  <h1>MovieBox</h1>
  <nav>
    <button onclick="showSection('home')">Home</button>
    <button onclick="showSection('history')">History</button>
    <button onclick="showSection('profile')">Profile</button>
  </nav>
</header>

<div class="container">

  <!-- Home Section -->
  <div id="homeSection">
    <h2>Home</h2>
    <input type="text" id="searchInput" placeholder="Search video..." oninput="searchVideo()">
    <div id="videoList"></div>
  </div>

  <!-- History Section -->
  <div id="historySection" class="hidden">
    <h2>History</h2>
    <div id="historyList"></div>
  </div>

  <!-- Profile Section -->
  <div id="profileSection" class="hidden">
    <h2>Profile</h2>
    <button onclick="showUserLogin()">User Login</button>
    <button onclick="showAdminPanel()">Admin Panel</button>

    <!-- User Login -->
    <div id="userLoginSection" class="hidden">
      <h3>User Login</h3>
      <div id="gSignInButton"></div>
      <div id="currentUser" class="hidden">
        Logged in as: <span id="userName"></span>
      </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanelSection" class="hidden">
      <h3>Admin Panel</h3>
      <input type="text" id="adminID" placeholder="Admin ID"><br>
      <input type="password" id="adminPass" placeholder="Password"><br>
      <button onclick="adminLogin()">Login</button>

      <div id="adminControls" class="hidden">
        <h4>Upload Video</h4>
        <input type="text" id="videoTitle" placeholder="Video Title"><br>
        <input type="text" id="videoLink" placeholder="Video Link"><br>
        <button onclick="uploadVideo()">Upload</button>

        <h4>Users List</h4>
        <div id="userList"></div>
      </div>
    </div>
  </div>

</div>

<script>
// Sections
function showSection(sec){
  document.getElementById("homeSection").classList.add("hidden");
  document.getElementById("historySection").classList.add("hidden");
  document.getElementById("profileSection").classList.add("hidden");
  if(sec==='home') document.getElementById("homeSection").classList.remove("hidden");
  if(sec==='history') document.getElementById("historySection").classList.remove("hidden");
  if(sec==='profile') document.getElementById("profileSection").classList.remove("hidden");
}

// Profile Tabs
function showUserLogin(){
  document.getElementById("userLoginSection").classList.remove("hidden");
  document.getElementById("adminPanelSection").classList.add("hidden");
}
function showAdminPanel(){
  document.getElementById("adminPanelSection").classList.remove("hidden");
  document.getElementById("userLoginSection").classList.add("hidden");
}

// Admin Login
let videos = [];
let users = [];
function adminLogin(){
  let id = document.getElementById("adminID").value;
  let pass = document.getElementById("adminPass").value;
  if(id==="112233445500" && pass==="123450"){
    alert("Admin login successful");
    document.getElementById("adminControls").classList.remove("hidden");
    renderUsersList();
    renderVideos();
  } else {
    alert("Invalid credentials");
  }
}

// Upload Video
function uploadVideo(){
  let title = document.getElementById("videoTitle").value;
  let link = document.getElementById("videoLink").value;
  if(title && link){
    videos.push({title, link});
    alert("Video uploaded!");
    renderVideos();
  }
}

// Render Videos
function renderVideos(){
  let list = document.getElementById("videoList");
  list.innerHTML="";
  videos.forEach((v,i)=>{
    let div = document.createElement("div");
    div.className="video-card";
    div.innerHTML=`<span>${v.title}</span>
                   <div>
                   <button onclick="playVideo(${i})">Play</button>
                   <button onclick="deleteVideo(${i})">Delete</button>
                   </div>`;
    list.appendChild(div);
  });
}

// Play Video
function playVideo(index){
  let v = videos[index];
  let url = v.link;
  let playerWindow = window.open("", "_blank", "width=800,height=500");
  playerWindow.document.write(`<h2>${v.title}</h2><iframe width="780" height="450" src="${url}" frameborder="0" allowfullscreen></iframe>`);
  addToHistory(v);
}

// Delete Video
function deleteVideo(index){
  if(confirm("Delete this video?")){
    videos.splice(index,1);
    renderVideos();
  }
}

// User List for Admin
function renderUsersList(){
  let ul = document.getElementById("userList");
  ul.innerHTML="";
  users.forEach((u,i)=>{
    let div = document.createElement("div");
    div.innerHTML=`${u.name} - <button onclick="blockUser(${i})">Block/Unblock</button>`;
    ul.appendChild(div);
  });
}

// Block/Unblock User
function blockUser(i){
  users[i].blocked = !users[i].blocked;
  renderUsersList();
}

// Search
function searchVideo(){
  let q = document.getElementById("searchInput").value.toLowerCase();
  let filtered = videos.filter(v=>v.title.toLowerCase().includes(q));
  let list = document.getElementById("videoList");
  list.innerHTML="";
  filtered.forEach((v,i)=>{
    let div = document.createElement("div");
    div.className="video-card";
    div.innerHTML=`<span>${v.title}</span>
                   <div><button onclick="playVideo(${i})">Play</button></div>`;
    list.appendChild(div);
  });
}

// History
function addToHistory(v){
  let h = document.getElementById("historyList");
  let div = document.createElement("div");
  div.textContent = v.title;
  h.appendChild(div);
}
</script>

</body>
</html>