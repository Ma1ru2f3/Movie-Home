<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MovieBox</title>
<style>
body { margin:0; font-family: Arial, sans-serif; background:#121212; color:#fff;}
header { background:#1f1f1f; padding:1em; text-align:center;}
nav { display:flex; justify-content:center; background:#1a1a1a; }
nav button { background:none; border:none; color:#fff; padding:1em 2em; cursor:pointer; font-size:16px; }
nav button.active { border-bottom:2px solid #ff4500; }
main { max-width:900px; margin:1em auto; padding:1em; }
input[type=text] { width:100%; padding:0.5em; margin:0.5em 0; border-radius:5px; border:none; }
button { background:#ff4500; border:none; padding:0.5em 1em; border-radius:5px; cursor:pointer; color:#fff; }
button:hover { background:#e03e00; }
.video-card { background:#2a2a2a; padding:0.5em; margin:1em 0; border-radius:8px; }
iframe { width:100%; height:250px; border-radius:5px; }
h2,h3 { margin:0.5em 0; }
.hidden { display:none; }
</style>
</head>
<body>

<header>
  <h1>MovieBox</h1>
</header>

<nav>
  <button id="homeBtn" class="active" onclick="showSection('home')">Home</button>
  <button id="videoBtn" onclick="showSection('video')">Video</button>
  <button id="historyBtn" onclick="showSection('history')">History</button>
  <button id="uploadBtn" onclick="showSection('upload')">Upload</button>
</nav>

<main>
  <!-- Home Section -->
  <section id="home">
    <input type="text" id="searchBar" placeholder="Search Video..." onkeyup="searchVideo()">
    <div id="videoList"></div>
  </section>

  <!-- Video Section -->
  <section id="video" class="hidden">
    <h2>All Videos</h2>
    <div id="videoListVideo"></div>
  </section>

  <!-- History Section -->
  <section id="history" class="hidden">
    <h2>History</h2>
    <div id="historyList"></div>
  </section>

  <!-- Upload Section -->
  <section id="upload" class="hidden">
    <h2>Upload Video</h2>
    <label>Title</label>
    <input type="text" id="title" placeholder="Video Title">

    <label>Google Drive Link</label>
    <input type="text" id="link" placeholder="https://drive.google.com/file/.../view?usp=sharing">

    <label>Category/Tag</label>
    <input type="text" id="category" placeholder="Anime, Movie, etc">

    <button onclick="addVideo()">Add Video</button>
  </section>
</main>

<script>
// Tabs
function showSection(sec) {
    document.querySelectorAll('main section').forEach(s => s.classList.add('hidden'));
    document.getElementById(sec).classList.remove('hidden');
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    document.getElementById(sec+'Btn').classList.add('active');
}

// LocalStorage Video List
let videos = JSON.parse(localStorage.getItem('videos') || '[]');

// Convert Google Drive Link
function convertDriveLink(url){
    return url.replace('/view?usp=drivesdk','/preview')
              .replace('/view?usp=sharing','/preview');
}

// Render Videos
function renderVideos() {
    const containerHome = document.getElementById('videoList');
    const containerVideo = document.getElementById('videoListVideo');
    containerHome.innerHTML = '';
    containerVideo.innerHTML = '';
    videos.forEach(v=>{
        const div = document.createElement('div');
        div.className='video-card';
        div.innerHTML = `
            <h3>${v.title}</h3>
            <p>Category: ${v.category || 'Uncategorized'}</p>
            <iframe src="${convertDriveLink(v.url)}" allowfullscreen></iframe>
        `;
        // Home Section
        containerHome.appendChild(div.cloneNode(true));
        // Video Section
        containerVideo.appendChild(div);
    });
}

// Add Video
function addVideo(){
    const title = document.getElementById('title').value.trim();
    const link = document.getElementById('link').value.trim();
    const category = document.getElementById('category').value.trim();
    if(!title||!link){ alert('Title এবং Link দিতে হবে!'); return; }
    videos.push({title,url:link,category});
    localStorage.setItem('videos',JSON.stringify(videos));
    renderVideos();
    document.getElementById('title').value='';
    document.getElementById('link').value='';
    document.getElementById('category').value='';
}

// Search Function
function searchVideo(){
    const query = document.getElementById('searchBar').value.toLowerCase();
    const container = document.getElementById('videoList');
    container.innerHTML='';
    videos.filter(v=>v.title.toLowerCase().includes(query)|| (v.category && v.category.toLowerCase().includes(query)))
          .forEach(v=>{
            const div=document.createElement('div');
            div.className='video-card';
            div.innerHTML=`<h3>${v.title}</h3><p>Category: ${v.category || 'Uncategorized'}</p><iframe src="${convertDriveLink(v.url)}" allowfullscreen></iframe>`;
            container.appendChild(div);
          });
}

// Initial Render
renderVideos();
</script>

</body>
</html>